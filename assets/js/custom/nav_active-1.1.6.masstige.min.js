!function(t){t.fn.navActive=function(i){var e=t.extend({depth1:void 0,depth2:void 0,depth3:void 0,activeClass:"on",callback:function(){}},i),n=window.location.pathname.split("/"),a=s(n),d=c(n),l=r(n),h=window.location.search;function s(t){return t.length>2?t[t.length-2]:void 0}function c(t){var i=t[t.length-2],e=t[t.length-1].replace(".html","");return e.split("__").length>1?i+e.split("__")[0]:i+e}function r(t){var i=t[t.length-2],e=t[t.length-1].replace(".html","");return e.split("__").length>1?i+e.split("__")[1]:i+e}function v(t,i){var e=""!==t,n=void 0!==i&&null!==i.match("\\?")&&i.match("\\?").length>0;return!(!e||!n)}t(this).each((function(){var i=void 0!==e.depth1?t(this).find(e.depth1):void 0,n=void 0!==e.depth2?t(this).find(e.depth2):void 0,o=void 0!==e.depth3?t(this).find(e.depth3):void 0;void 0!==i&&i.length>0&&i.each((function(i,n){var d=t(this).children("a"),l=s(d.attr("href").split("/"));a===l&&d.addClass(e.activeClass)})),void 0!==n&&n.length>0&&n.each((function(){var i=t(this).children("a"),n=i.attr("href").split("/"),a=n[2].split("#")[0];n[2]=a;var l,s,r,o,p,f=c(n),u=v(h,f),g=(s=(l=d).indexOf("-view")>0,r=l.indexOf("-write")>0,o=l.indexOf("-pw")>0,p=l.indexOf("-edit")>0,s?[!0,"-view"]:r?[!0,"-write"]:o?[!0,"-pw"]:!!p&&[!0,"-edit"]);u?d+h===f&&i.addClass(e.activeClass):(!0===g[0]&&(d=d.replace(g[1],"")),d===f&&i.addClass(e.activeClass))})),void 0!==o&&o.length>0&&o.each((function(){var i=t(this).children("a"),n=r(i.attr("href").split("/"));v(h,n)?l+h===n&&i.addClass(e.activeClass):l===n&&i.addClass(e.activeClass)})),e.callback()}))}}(jQuery);